{
  "project": "False Witness",
  "branchName": "ralph/photo-evidence",
  "description": "Photo Camera equipment for capturing visual manifestations as permanent evidence",
  "tickets": ["FW-040c"],
  "userStories": [
    {
      "id": "FW-040c-01",
      "title": "Create PhotoCamera equipment base",
      "description": "Create the photo camera equipment class extending Equipment",
      "acceptanceCriteria": [
        "Create src/equipment/photo_camera.gd extending Equipment",
        "Set equipment_type to EquipmentType.VIDEO_CAMERA (reuse existing enum)",
        "Set equipment_name to 'Photo Camera'",
        "Set use_mode to UseMode.INSTANT (single capture per use)",
        "Add max_film: int = 5 (limited shots per game)",
        "Add current_film: int tracking remaining shots",
        "Add film_depleted signal",
        "$GODOT --headless --import succeeds",
        "gdlint src/ passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": "File: src/equipment/photo_camera.gd. Reuses VIDEO_CAMERA enum value."
    },
    {
      "id": "FW-040c-02",
      "title": "Implement photo capture mechanic",
      "description": "Camera captures current view when used",
      "acceptanceCriteria": [
        "Override _use_impl() to trigger capture",
        "Capture decrements current_film by 1",
        "Capture fails (returns early) if current_film == 0",
        "Add photo_captured(photo_data: Dictionary) signal",
        "Photo data includes: timestamp, location (Vector3), player_id",
        "Emit film_depleted when film reaches 0",
        "gdlint src/ passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": "File: src/equipment/photo_camera.gd"
    },
    {
      "id": "FW-040c-03",
      "title": "Add entity detection during photo capture",
      "description": "Detect if entity is visible in frame when photo taken",
      "acceptanceCriteria": [
        "Add _check_entity_in_frame() -> bool method",
        "Check if entity is within camera FOV (60 degrees)",
        "Check line-of-sight raycast to entity",
        "Check entity is currently manifesting (visible)",
        "Photo data includes: contains_entity (bool), entity_type (if captured)",
        "gdlint src/ passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": "Entity must be manifesting AND in frame for evidence"
    },
    {
      "id": "FW-040c-04",
      "title": "Create PhotoEvidence resource",
      "description": "Data class for captured photo evidence",
      "acceptanceCriteria": [
        "Create src/evidence/photo_evidence.gd extending Resource",
        "Add class_name PhotoEvidence",
        "Properties: timestamp, location, photographer_id, contains_entity, entity_type",
        "Add manifestation_type: ManifestationType (FULL_BODY, PARTIAL, etc.)",
        "Add get_evidence_quality() -> ReadingQuality method",
        "gdlint src/ passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": "File: src/evidence/photo_evidence.gd. Photos are permanent records."
    },
    {
      "id": "FW-040c-05",
      "title": "Generate VISUAL_MANIFESTATION evidence from photos",
      "description": "Create evidence when photo captures entity",
      "acceptanceCriteria": [
        "When photo contains_entity == true, create Evidence",
        "Evidence type = VISUAL_MANIFESTATION",
        "Trust level = HIGH (photo is shared display)",
        "Quality = STRONG (photo is permanent record)",
        "Use EvidenceManager.collect_evidence() to submit",
        "Store PhotoEvidence reference in Evidence metadata",
        "gdlint src/ passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": "Photos provide permanent proof unlike fleeting sightings"
    },
    {
      "id": "FW-040c-06",
      "title": "Create camera viewfinder UI",
      "description": "SubViewport showing camera view when aiming",
      "acceptanceCriteria": [
        "Create src/ui/camera_viewfinder.gd extending Control",
        "Create scenes/ui/camera_viewfinder.tscn",
        "Show SubViewportContainer with camera feed",
        "Display film counter (e.g., '3/5 shots')",
        "Show capture reticle/frame guides",
        "Show 'No Film' warning when depleted",
        "gdlint src/ passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": "Files: src/ui/camera_viewfinder.gd, scenes/ui/camera_viewfinder.tscn"
    },
    {
      "id": "FW-040c-07",
      "title": "Implement camera raise/lower animation state",
      "description": "Camera raised to eye when equipped and active",
      "acceptanceCriteria": [
        "Override _on_equipped() to prepare viewfinder",
        "Show viewfinder UI when equipment becomes active",
        "Hide viewfinder when switching equipment",
        "Add brief raise/lower transition (0.2s)",
        "Player movement speed reduced while aiming (optional)",
        "gdlint src/ passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": "Viewfinder visible only when camera is active equipment"
    },
    {
      "id": "FW-040c-08",
      "title": "Add photo flash visual effect",
      "description": "Flash effect when photo taken",
      "acceptanceCriteria": [
        "Add OmniLight3D child for flash",
        "Flash briefly when photo taken (0.1s)",
        "Flash visible to all players (network synced)",
        "Creates noise event that entity can hear",
        "Flash disabled during hunt (silent mode)",
        "gdlint src/ passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": "Risk/reward: flash attracts entity but captures evidence"
    },
    {
      "id": "FW-040c-09",
      "title": "Create photo gallery storage",
      "description": "Store captured photos in player inventory",
      "acceptanceCriteria": [
        "Add _captured_photos: Array[PhotoEvidence] to PhotoCamera",
        "Photos persist until match end",
        "Add get_photos() -> Array[PhotoEvidence] method",
        "Add get_photo_count() -> int method",
        "Photos accessible via evidence board detail view",
        "gdlint src/ passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": "Photos stored locally; evidence submitted to EvidenceManager"
    },
    {
      "id": "FW-040c-10",
      "title": "Implement photo sharing mechanic",
      "description": "Players can show photos to teammates",
      "acceptanceCriteria": [
        "Add show_photo_to_nearby() method",
        "Detect players within 3m radius",
        "Display photo on shared UI for nearby players",
        "Photo view shows: image placeholder, timestamp, location",
        "Network sync photo display state",
        "gdlint src/ passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": "Photos are shared display - everyone sees same thing"
    },
    {
      "id": "FW-040c-11",
      "title": "Add camera to equipment select UI",
      "description": "Camera appears in equipment selection",
      "acceptanceCriteria": [
        "Add Photo Camera to equipment_select.gd grid",
        "Show camera icon (placeholder)",
        "Tooltip explains: 'Capture visual manifestations'",
        "Shows evidence type: VISUAL_MANIFESTATION",
        "Camera selectable as one of 3 equipment slots",
        "gdlint src/ passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": "File: src/ui/equipment_select.gd"
    },
    {
      "id": "FW-040c-12",
      "title": "Create placeholder camera 3D model",
      "description": "Visual representation of camera equipment",
      "acceptanceCriteria": [
        "Create scenes/equipment/photo_camera.tscn",
        "Add placeholder mesh (box with lens cylinder)",
        "Add flash light node (initially off)",
        "First-person view offset configured",
        "Visible to other players when held",
        "gdlint scenes/ passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": "File: scenes/equipment/photo_camera.tscn. Placeholder mesh for now."
    },
    {
      "id": "FW-040c-13",
      "title": "Write unit tests for PhotoCamera",
      "description": "Test camera equipment mechanics",
      "acceptanceCriteria": [
        "Create tests/unit/test_photo_camera.gd",
        "Test film decrement on capture",
        "Test capture fails when no film",
        "Test entity detection in frame",
        "Test photo data structure",
        "All tests pass",
        "gdlint tests/ passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": "File: tests/unit/test_photo_camera.gd"
    },
    {
      "id": "FW-040c-14",
      "title": "Write integration tests for photo evidence",
      "description": "Test photo evidence flow",
      "acceptanceCriteria": [
        "Create tests/integration/test_photo_evidence.gd",
        "Test photo with entity creates evidence",
        "Test photo without entity creates no evidence",
        "Test evidence submitted to EvidenceManager",
        "Test photo storage and retrieval",
        "All tests pass",
        "gdlint tests/ passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": "File: tests/integration/test_photo_evidence.gd"
    }
  ]
}
