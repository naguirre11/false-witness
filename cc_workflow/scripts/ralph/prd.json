{
  "project": "False Witness",
  "branchName": "ralph/design-tokens",
  "description": "Centralized design token system and UI refactor for consistent theming",
  "tickets": ["FW-086", "FW-087"],
  "userStories": [
    {
      "id": "FW-086-01",
      "title": "Create DesignTokens autoload with color palette",
      "description": "Create the design tokens singleton with color constants",
      "acceptanceCriteria": [
        "Create themes/design_tokens.gd extending Node",
        "Add const COLORS dictionary with all color tokens",
        "Background colors: bg_primary, bg_secondary, bg_surface, bg_overlay",
        "Text colors: text_primary, text_secondary, text_muted, text_danger",
        "Accent colors: accent_primary, accent_secondary, accent_warning, accent_success",
        "Horror colors: horror_blood, horror_ethereal, horror_corruption",
        "Register as autoload 'DesignTokens' in project.godot",
        "$GODOT --headless --import succeeds",
        "gdlint themes/ passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "File: themes/design_tokens.gd. Colors extracted from existing UI files."
    },
    {
      "id": "FW-086-02",
      "title": "Add trust level and evidence category colors",
      "description": "Add game-specific color tokens for evidence system",
      "acceptanceCriteria": [
        "Add trust level colors to COLORS dictionary:",
        "  trust_unfalsifiable (gold), trust_high (green), trust_variable (yellow)",
        "  trust_low (orange), trust_sabotage (red)",
        "Add evidence category colors:",
        "  evidence_equipment, evidence_apparent, evidence_triggered, evidence_behavior",
        "Add PLAYER_COLORS array with 8 distinct colors for player attribution",
        "Colors match existing values in evidence_slot.gd",
        "gdlint themes/ passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Trust colors: gold (unfalsifiable), green (high), yellow (variable), orange (low), red (sabotage)"
    },
    {
      "id": "FW-086-03",
      "title": "Add spacing and font size constants",
      "description": "Add spacing and typography tokens",
      "acceptanceCriteria": [
        "Add const SPACING dictionary with: xs (4), sm (8), md (16), lg (24), xl (32), xxl (48)",
        "Add const FONT_SIZES dictionary with: xs (12), sm (14), md (16), lg (20), xl (24), xxl (32), display (48)",
        "All values are integers for pixel measurements",
        "gdlint themes/ passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "File: themes/design_tokens.gd"
    },
    {
      "id": "FW-086-04",
      "title": "Add animation timing and border constants",
      "description": "Add motion and border styling tokens",
      "acceptanceCriteria": [
        "Add const ANIMATION dictionary with:",
        "  Standard: duration_instant (0.1), duration_fast (0.15), duration_normal (0.25), duration_slow (0.4)",
        "  Horror: duration_tension (0.6), duration_reveal (0.8), duration_startle (0.05)",
        "Add const BORDERS dictionary with:",
        "  Radii: radius_none (0), radius_sm (2), radius_md (4), radius_lg (8), radius_full (9999)",
        "  Widths: width_thin (1), width_normal (2), width_thick (4)",
        "gdlint themes/ passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "File: themes/design_tokens.gd"
    },
    {
      "id": "FW-086-05",
      "title": "Create horror_theme.tres base styles",
      "description": "Create Theme resource with base Control styles",
      "acceptanceCriteria": [
        "Create themes/horror_theme.tres Theme resource",
        "Style Panel with bg_surface color and radius_md corners",
        "Style Button with accent_primary color, hover/pressed states",
        "Style Label with text_primary color, md font size",
        "Style LineEdit with bg_secondary color, text_primary text",
        "Theme file loads without errors in editor",
        "gdlint themes/ passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "File: themes/horror_theme.tres. Create StyleBoxFlat resources programmatically if needed."
    },
    {
      "id": "FW-086-06",
      "title": "Add theme type variations",
      "description": "Create specialized button and panel variations",
      "acceptanceCriteria": [
        "Add DangerButton type variation with accent_warning/horror_blood colors",
        "Add GhostButton type variation with transparent background, text_secondary color",
        "Add CorruptedPanel type variation with horror_corruption tint",
        "Style OptionButton, HSlider, CheckBox base types",
        "Theme variations accessible via type_variation property",
        "gdlint themes/ passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "File: themes/horror_theme.tres"
    },
    {
      "id": "FW-086-07",
      "title": "Write unit tests for DesignTokens",
      "description": "Verify token accessibility and values",
      "acceptanceCriteria": [
        "Create tests/unit/test_design_tokens.gd",
        "Test DesignTokens autoload is accessible",
        "Test COLORS dictionary contains all required keys",
        "Test SPACING values are positive integers",
        "Test ANIMATION values are positive floats",
        "Test PLAYER_COLORS array has 8 entries",
        "All tests pass",
        "gdlint tests/ passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "File: tests/unit/test_design_tokens.gd"
    },
    {
      "id": "FW-087-01",
      "title": "Refactor results_screen.gd to use tokens",
      "description": "Replace hardcoded colors in results screen",
      "acceptanceCriteria": [
        "Replace all Color() constructors with DesignTokens.COLORS.*",
        "Replace timing literals with DesignTokens.ANIMATION.*",
        "Apply horror_theme.tres to scene root (if applicable)",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "File: src/ui/results_screen.gd (16 colors, 6 modulates)"
    },
    {
      "id": "FW-087-02",
      "title": "Refactor evidence_slot.gd to use tokens",
      "description": "Replace hardcoded colors in evidence slot",
      "acceptanceCriteria": [
        "Replace trust level colors with DesignTokens.COLORS.trust_*",
        "Replace evidence category colors with DesignTokens.COLORS.evidence_*",
        "Replace player attribution colors with DesignTokens.PLAYER_COLORS array",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "File: src/ui/evidence_slot.gd (7 colors, 6 modulates)"
    },
    {
      "id": "FW-087-03",
      "title": "Refactor evidence_detail_popup.gd to use tokens",
      "description": "Replace hardcoded colors in evidence detail popup",
      "acceptanceCriteria": [
        "Replace all hardcoded colors with token references",
        "Apply consistent styling with evidence_slot.gd",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "File: src/ui/evidence_detail_popup.gd (3 colors, 8 modulates)"
    },
    {
      "id": "FW-087-04",
      "title": "Refactor hud.gd to use tokens",
      "description": "Replace hardcoded colors in HUD",
      "acceptanceCriteria": [
        "Replace timer warning colors (red <60s, orange <2min) with tokens",
        "Replace equipment highlight color with token",
        "Replace death overlay color with token",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "File: src/ui/hud.gd (4 colors, 6 modulates)"
    },
    {
      "id": "FW-087-05",
      "title": "Refactor entity_matrix.gd to use tokens",
      "description": "Replace hardcoded colors in entity matrix",
      "acceptanceCriteria": [
        "Replace eliminated entity styling with tokens",
        "Replace remaining count coloring with tokens",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "File: src/ui/entity_matrix.gd (3 colors, 5 modulates)"
    },
    {
      "id": "FW-087-06",
      "title": "Refactor voting_ui.gd to use tokens",
      "description": "Replace hardcoded colors in voting UI",
      "acceptanceCriteria": [
        "Replace vote status colors with tokens",
        "Replace button state colors with tokens",
        "No Color() constructors with numeric literals remain",
        "Visual appearance unchanged",
        "gdlint src/ui/ passes"
      ],
      "priority": 13,
      "passes": true,
      "notes": "File: src/ui/voting_ui.gd (4 colors, 4 modulates)"
    },
    {
      "id": "FW-087-07",
      "title": "Verify refactored files and run smoke tests",
      "description": "Final verification of token refactoring",
      "acceptanceCriteria": [
        "All 6 refactored files compile without errors",
        "Run grep to verify no Color() with numeric literals in refactored files",
        "Smoke tests pass: ./cc_workflow/scripts/run-tests.ps1 -Mode smoke",
        "Visual comparison shows no regressions",
        "gdlint src/ui/ passes"
      ],
      "priority": 14,
      "passes": true,
      "notes": "Search pattern: grep -n 'Color([0-9]' src/ui/results_screen.gd src/ui/evidence_slot.gd ..."
    }
  ]
}
